function makeCapcha(a){var r=a.attr("id"),t=a.find(".capcha"),e=Math.ceil(10*Math.random()),c=Math.ceil(10*Math.random());return t.html('<span class="capcha_quest">Проверка: '+e+"+"+c+'=</span> <input type="text" name="capcha" class="capcha_answ span32" value="" placeholder="?" required /> <span class="error_capcha"></span>'),window.capcha[r]=e+c}function checkCapcha(a){var r=a.attr("id"),t=capcha[r]+""||"-1";return a.find(".capcha_answ").val()==t}var capcha={};$(document).ready(function(){function a(a){var r=a.parents("form");if(a.val())a.removeClass("forminput-error").next(".error").remove(),r.find(".error").length||r.find(".error-result").hide();else if(!a.hasClass("forminput-error"))return a.addClass("forminput-error").after('<span class="error"></span>'),use_ajax=!1}makeCapcha($("#contactForm")),makeCapcha($("#calcForm")),$("body").on("submit","#contactForm",function(r){return a($("#name")),a($("#phone")),a($("#mail")),!$("#contactForm .error").length&&checkCapcha($(this))?$.post("submit.php",$(this).serialize()+"&ajax=1",function(a){-1==parseInt(a)?$("#lastinput").after('<span class="error">Пожалуйста, заполните обязательные поля.</span>'):$("#contactForm").hide("slow").after('<h4 id="contactForm_success">Спасибо!</h4> <p>Данные успешно отправлены</p>')}):checkCapcha($(this))||(makeCapcha($(this)),$(this).find(".capcha_answ").next(".error_capcha").html("Неверное значение! Попробуйте еще раз.")),r.preventDefault(),!1}),$("#calcForm").submit(function(r){return a($("#name1")),a($("#phone1")),a($("#mail1")),!$("#calcForm .error").length&&checkCapcha($(this))?$.post("submit.php",$(this).serialize()+"&ajax=1",function(a){-1==parseInt(a)?$(this).find(".error-result").show():($("#calcForm").find("input[type=text], input[type=phone], input[type=email], textarea").each(function(){$(this).val("")}),$("#calcForm_submit").hide(),$("#calcForm_preSubmit").show(),$("body").addClass("popup2-show"))}):checkCapcha($(this))||(makeCapcha($(this)),$(this).find(".capcha_answ").next(".error_capcha").html("Неверное значение! Попробуйте еще раз.")),r.preventDefault(),!1}),$("#calcForm_preSubmit_button").on("click",function(){a($("#name1")),a($("#phone1")),a($("#mail1")),$("#calcForm .error").length?$(this).parent().prev(".error-result").show():($("#calcForm_preSubmit").hide(),$(this).parent().prev(".error-result").hide(),$("#calcForm_submit").show("slow"))}),$("body").on("input",".forminput-error",function(){a($(this))})});